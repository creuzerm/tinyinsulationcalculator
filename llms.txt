# WebMCP Tools

This application exposes client-side WebMCP tools for interacting with the calculator logic.
These tools are registered via `window.navigator.modelContext`.

## Imperative Tools (JavaScript API)

### `apply_preset`
Applies a construction preset (e.g. 'van_build', 'code_min') to a specific scenario.
- `suffix`: "_A" or "_B"
- `preset`: "code_min", "high_perf", "passive_house", "van_build", "uninsulated"

### `set_dimensions`
Sets the building shape and dimensions.
- `shape`: "rectangle", "a-frame", "gothic-arch", "cargo-van"
- `length`, `width`, `height`, `roofPitch`

### `run_simulation`
Runs the passive thermal simulation.
- `duration`: Hours (24 or 168)
- `lowTemp`, `highTemp`


### `get_detailed_results`
Retrieves the current calculated heat loss results for all active scenarios.


### `calculate_assembly`
Calculates the effective R-value (Winter/Summer) of a wall or roof assembly given a list of layer keys.
- `layers`: Array of material keys (e.g., '2x4 Stud (16oc)', 'Fiberglass Batt (3.5in)'). See `materials.json` for full list of keys.

### `estimate_r_value`
Estimates the R-value of a building component using energy balance calculations based on HVAC load and temperatures.
- `spaceDimensions`: `{ length, width, height }` (ft)
- `temperatures`: `{ indoor, outdoor }` (F)
- `hvac`: `{ rate, mode }` (BTU/hr, 'heating'/'cooling')
- `targetComponent`: `{ area, type }` (sq ft, 'wall'/'ceiling')
- `surfaceTemperatures`: `{ indoor, outdoor }` (F, optional, for material R-value)
- `envelope`: `{ achRate, areaWindows, areaOtherWallsCeilings, areaFloor }`

## Declarative Tools (HTML Forms)

The following HTML forms are instrumented with WebMCP attributes for declarative interaction:

### `estimate_r_value` (Form)
Declarative form for estimating R-value. Located in `existing_building_estimator.html`. Supports auto-submit.

### `update_shared_settings`
Update shared building and climate settings (Shape, Dimensions, Temperature, Vehicle Color).

### `update_scenario_a`
Update Scenario A construction details (Insulation, R-values, Windows, Doors, Mass).

### `update_scenario_b`
Update Scenario B construction details.

### `update_simulation_settings`
Update simulation settings (Duration, Internal Gains, Daily Temperatures).
